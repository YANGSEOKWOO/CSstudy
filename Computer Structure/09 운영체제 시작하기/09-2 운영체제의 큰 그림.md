
## 운영체제의 심장, 커널

스마트폰에서의 핵심 기능 : 전화, 문자, 인터넷 기능이 있다.

이와 마찬가지로, 운영체제가 응용프로그램에게 제공하는 서비스 종류 중 핵심적인 서비스가 있다.
- 자원에 접근하고 조작하는 기능
- 프로그램이 올바르고 안전하게 실행되게 하는 기능
- 등등

이렇게 운영체제의 핵심 서비스를 담당하는 부분을 **커널**이라고 한다.

운영체제가 설치된 모든 기기에는 커널이 있다.
커널 : 사람의 심장, 자동차의 엔진과도 같다.

어떤 커널을 사용하는 지에 따라, 실행하고 개발하는 프로그램이 하드웨어를 이용하는 양상이 달라지고, 컴퓨터 전체의 성능이 달라질 수도 있다.

![[Pasted image 20240222162340.png]]

### 이중모드와 시스템 호출

운영체제는 사용자가 실행하는 응용프로그램이 하드웨어 자원에 직접 접근하는 것을 방지한다. => 자원의 보호 목적

응용프로그램이 막 CPU, 메모리, 하드 디스크에 마음대로 접근하고 조작할 수 있다면
- 자원의 무질서
- 컴퓨터에 악영향

따라서, 응용프로그램의 자원 접근은 오직!!!! **운영체제**를 통해서만 접근하도록 한다.
- 일종의 문지기 역할

응용프로그램은 자원에 접근하려면, 운영체제한테 빌어야 한다.
- 운영체제는 커널 영역 내의 하드디스크에 데이터를 저장하는 코드를 실행하여 응용프로그램의 작업을 대신 수행한다.
![[Pasted image 20240222162816.png]]

**이중모드**로써 구현된다.
- CPU가 명령어를 실행하는 모드를 사용자모드, 커널모드로 구분하는 방식
- CPU : 명령어를 사용자모드, 커널모드로 실행할 수 있다.

#### 사용자모드
운영체제 서비스를 제공받을 수 없는 실행모드
- 커널 영역의 코드를 실행할 수 없는 모드
- 응용프로그램은 기본적으로 사용자모드로 실행된다.

#### 커널모드
 운영체제 서비스를 제공받을 수 있는 실행 모드
 - 커널 영역의 코드를 실행할 수 있는 모드
 - CPU가 커널 모드로 명령어를 실행한다면, 자원에 접근하는 명령 등 모든 명령어를 실행할 수 있다.

사용자모드로 실행되는 프로그램이 자원에 접근하려면
- 커널모드로 전환되어야 한다. => 운영체제에 요청을 보내야 한다.
- 요청 : **시스템 콜**
- 일종의 인터럽트(소프트웨어적)
![[Pasted image 20240222163313.png]]

#### 시스템 호출 작동 예시
- 응용프로그램이 하드 디스크에 데이터를 저장하려고 할 때

![[Pasted image 20240222163457.png]]
1. 하드디스크에 데이터를 저장하는 시스템 콜 호출 => 커널모드 전환
2. 운영체제 내의 '하드디스크에 데이터를 저장하는 코드' 실행, 하드디스크 접근
3. 접근이 끝나면 다시 사용자 모드로 복귀


