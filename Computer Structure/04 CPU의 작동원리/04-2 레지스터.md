#### 서론
프로그램 속 명령어, 데이터는 실행 전후 반드시 **레지스터**에 저장된다.
=> 레지스터에 저장된 값만 잘 관찰해도 실행흐름을 파악할 수 있다.

CPU안에는 다양한 레지스터, 각각 다른 역할이 있다.

## 반드시 알아야 할 레지스터
레지스터는 CPU마다 이름, 크기, 종류가 매우 다양하다.
하지만, 많은 CPU가 공통으로 포함하고 있는 여덟 개의 레지스터를 설명한다.

1. 프로그램 카운터 PC
	1. **메모리에서 가져올 명령어의 주소**
		- 메모리에서 읽어 들일 명령어의 주소가 들어간다.
2. 명령어 레지스터 IR
	1. 해석할 명령어 = 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터
		- 제어장치가 여기서 명령어를 받아들이고 해석한 후 제어신호를 내보낸다.
3. 메모리 주소 레지스터 MAR
	1. 메모리의 주소를 저장하는 레지스터
	2. CPU가 읽어 들이고자하는 주소 값을 주소 버스로 보낼 때 MAR을 거친다.
4. 메모리 버퍼 레지스터 MBR
	1. 메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터
	2. 메모리에 쓰고싶은 값
	3. 메모리로부터 전달받은 값은 MBR을 거친다.
	CPU가 주소버스로 내보낼 값 : MAR을 거친다.
	 데이터버스로 주고 받을 값 : MBR을 거친다.
1. 플래그 레지스터 
	1. 연산결과 or CPU 상태에 대한 부가적인 정보를 저장하는 레지스터
2. 범용 레지스터
	1. 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
	2. MBR의 경우 데이터버스로 주고받을 값만 저장한다.
	3. MAR의 경우 주소버스로 내보낼 주소값만 저장하지만
	4. 범용 레지스터는 데이터, 주소 모두 저장할 수 있다.

3. 스택 포인터
4. 베이스 레지스터

### 실행과정
![[Pasted image 20240217170146.png]]
![[Pasted image 20240217170159.png]]
CPU로 실행할 프로그램이 1000번지 ~ 1500번지까지 저장되어있다고 가정
1. PC에 1000에 저장된다.
2. 이제 주소를 읽어와야 하니까 MAR에 1000이 저장된다.
3. 주소버스를 타고, 제어장치에서 제어신호로 메모리 읽기신호와 함께 1000번지의 데이터를 읽어온다.
4. 읽어온 데이터는 데이터 버스를 타고 MBR에 저장된다. + PC가 증가되어 다음 명령어를 읽을 준비를 한다.
5. MBR의 값은 IR로 이동한다.
6. 제어장치가 IR의 명령어를 해석하고 제어신호를 발생시킨다.
7. 명령어 처리가 끝나면 PC의 값을 읽어들인다.
8. 반복


